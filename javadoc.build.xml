<?xml version = '1.0' encoding = 'windows-1252'?>
<!DOCTYPE project>
<project name="javadoc" default="javadoc">
 <description>
    Provides JavaDoc. 
    Invocation:  ant -f javadoc.build.xml (to produce in build directory)
                 ant -Djavadoc.dir=javadoc -f javadoc.build.xml (to produce in SVN directory)   
  </description>

 <patternset id="javadoc.sources">
  <include name="${basedir}/src" />
  <exclude name="**/*Test*" />
 </patternset>

 <import file="build.xml" />
 <property name="javadoc.dir" location="${build.dir}/javadoc" />
 <property name="javadoc.failonerror" value="false" />

 <tstamp>
  <format property="javadoc.timestamp" pattern="dd-MMM-yyyy hh:mm:ss" />
 </tstamp>

 <target name="javadoc" depends="compile" description="Generate JavaDoc.">
  <mkdir dir="${javadoc.dir}" />
  <javadoc classpathref="compile.classpath" destdir="${javadoc.dir}" author="true" version="true" use="true" package="true" overview="${src.dir}/overview.html" windowtitle="${system.name} API" doctitle="${system.name} API (generated on: ${javadoc.timestamp})" failonerror="${javadoc.failonerror}" linksource="true">
   <fileset dir="${src.dir}" defaultexcludes="yes">
    <include name="**/*.java" />
    <exclude name="**/*.html" />
    <exclude name="**/*Test*" />
   </fileset>
  </javadoc>
  <!-- Needed because some files have a mixture of EOL types, leading to SVN commit error. -->
  <fixcrlf srcdir="${javadoc.dir}" includes="**/*.html" />
 </target>

 <target name="javadoc.zip" depends="javadoc" description="Create javadoc and source zip files.">
  <mkdir dir="${build.dir}/jar" />
  <property name="javadoc.linksource" value="false" />
  <zip zipfile="${build.dir}/jar/${system.name}-javadoc.zip" basedir="${javadoc.dir}" />
  <zip zipfile="${build.dir}/jar/${system.name}-source.zip" basedir="${src.dir}" />
 </target>
</project>